{"version":3,"sources":["shared/services/movies.js","client/MovieList/MovieList.jsx","client/MovieList/MovieList.module.css","shared/hooks/useFetch.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","shared/hooks/useForm.js","client/SearchForm/initianState.js","client/SearchForm/SearchForm.jsx","Pages/MoviesPage/MoviesPage.jsx"],"names":["instance","axios","create","baseURL","params","api_key","searchMovies","query","get","getTrendingMovies","a","data","results","getMovieInfo","id","language","getMovieCredits","getMovieReviews","page","MovieList","list","location","useLocation","movieElements","map","item","className","styles","List","to","pathname","state","from","Link","original_title","original_name","defaultProps","module","exports","useFetch","initialState","queryFunc","useState","setState","useEffect","result","fetchFunc","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","useForm","onSubmit","name","prevState","e","preventDefault","q","Form","handleChange","handleSubmit","onChange","type","MoviesPage","setList","setQuery","history","useHistory","fetchMovies","searchParams","URLSearchParams","search","searchText","SearchForm"],"mappings":"wVAEMA,E,OAAWC,EAAMC,OAAO,CAC5BC,QAAS,+BACTC,OAAQ,CACNC,QAAS,sCAIAC,EAAe,SAACC,GAC3B,OAAOP,EAASQ,IAAI,gBAAiB,CACnCJ,OAAQ,CACNG,YAKOE,EAAiB,uCAAG,8BAAAC,EAAA,sEACRV,EAASQ,IAAI,uBADL,uBACvBG,EADuB,EACvBA,KADuB,kBAExBA,EAAKC,SAFmB,2CAAH,qDAKjBC,EAAe,SAACC,GAC3B,OAAOd,EAASQ,IAAT,iBAAuBM,GAAM,CAClCV,OAAQ,CACNW,SAAU,YAKHC,EAAkB,SAACF,GAC9B,OAAOd,EAASQ,IAAT,iBAAuBM,EAAvB,YAAqC,CAC1CV,OAAQ,CACNW,SAAU,YAKHE,EAAkB,SAACH,GAAkB,IAAdI,EAAa,uDAAN,EACzC,OAAOlB,EAASQ,IAAT,iBAAuBM,EAAvB,YAAqC,CAC1CV,OAAQ,CACNW,SAAU,QACVG,Y,gCC1CN,0CAIMC,EAAY,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACbC,EAAWC,cACXC,EAAgBH,EAAKI,KAAI,SAACC,GAAD,OAC7B,oBAAIC,UAAWC,IAAOC,KAAtB,SACE,cAAC,IAAD,CACEC,GAAI,CACFC,SAAS,WAAD,OAAaL,EAAKX,IAC1BiB,MAAO,CACLC,KAAMX,IAGVK,UAAWC,IAAOM,KAPpB,SASGR,EAAKS,eAAiBT,EAAKS,eAAiBT,EAAKU,iBAVrBV,EAAKX,OAcxC,OAAO,6BAAKS,KAGCJ,MAEfA,EAAUiB,aAAe,CACvBhB,KAAM,K,mBC1BRiB,EAAOC,QAAU,CAAC,KAAO,wBAAwB,KAAO,0B,gJCC3CC,EAAW,SAACC,EAAcC,GAAe,IAAD,EACzBC,mBAASF,GADgB,mBAC5CT,EAD4C,KACrCY,EADqC,KAanD,OAVAC,qBAAU,YACO,uCAAG,4BAAAlC,EAAA,+EAEO+B,IAFP,OAERI,EAFQ,OAGdF,EAASE,GAHK,uGAAH,qDAMfC,KACC,CAACL,IAEG,CAACV,ICfK,SAASgB,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,ECVT,SAASQ,EAAQC,EAAQC,GACvB,IAAIC,EAAOR,OAAOQ,KAAKF,GAEvB,GAAIN,OAAOS,sBAAuB,CAChC,IAAIC,EAAUV,OAAOS,sBAAsBH,GACvCC,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOZ,OAAOa,yBAAyBP,EAAQM,GAAKV,eAEtDM,EAAKM,KAAKC,MAAMP,EAAME,GAGxB,OAAOF,EAGM,SAASQ,EAAeC,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAE/CA,EAAI,EACNb,EAAQL,OAAOqB,IAAS,GAAMC,SAAQ,SAAUxB,GAC9C,EAAemB,EAAQnB,EAAKuB,EAAOvB,OAE5BE,OAAOuB,0BAChBvB,OAAOwB,iBAAiBP,EAAQjB,OAAOuB,0BAA0BF,IAEjEhB,EAAQL,OAAOqB,IAASC,SAAQ,SAAUxB,GACxCE,OAAOC,eAAegB,EAAQnB,EAAKE,OAAOa,yBAAyBQ,EAAQvB,OAKjF,OAAOmB,EC/BF,IAAMQ,EAAU,SAACpC,EAAcqC,GAAc,IAAD,EACvBnC,mBAASF,GADc,mBAC1CT,EAD0C,KACnCY,EADmC,KAgBjD,MAAO,CAACZ,EAba,SAAC,GAAgB,IAAdqC,EAAa,EAAbA,OACdU,EAAgBV,EAAhBU,KAAM5B,EAAUkB,EAAVlB,MACdP,GAAS,SAACoC,GACR,OAAO,OAAKA,GAAZ,QAAwBD,EAAO5B,QAId,SAAC8B,GACpBA,EAAEC,iBACFJ,EAAS9C,GACTY,EAAS,KAAKH,Q,2FCfLA,EAAe,CAC1B0C,EAAG,I,OCaUC,EAVF,SAAC,GAAkB,IAAhBN,EAAe,EAAfA,SAAe,EACcD,YAAQpC,EAAcqC,GADpC,mBACtBlE,EADsB,KAChByE,EADgB,KACFC,EADE,KAG7B,OACE,sBAAMR,SAAUQ,EAAhB,SACE,uBAAOP,KAAK,IAAI5B,MAAOvC,EAAKuE,EAAGI,SAAUF,EAAcG,KAAK,Y,+BCuCnDC,UAzCI,WAAO,IAAD,EACC9C,mBAAS,IADV,mBAChBtB,EADgB,KACVqE,EADU,OAEG/C,mBAAS,IAFZ,mBAETgD,GAFS,WAGjBC,EAAUC,cACVvE,EAAWC,cA6BjB,OAnBAsB,qBAAU,WACR,IAAMiD,EAAW,uCAAG,kCAAAnF,EAAA,sEAEVoF,EAAe,IAAIC,gBAAgB1E,EAAS2E,QAC5CC,EAAaH,EAAatF,IAAI,KAHpB,SAIOF,YAAa2F,GAJpB,gBAIRtF,EAJQ,EAIRA,KACR8E,EAAQ9E,EAAKC,SALG,4GAAH,qDAQbS,EAAS2E,QACXH,MAOD,CAACxE,EAAS2E,SAGX,qCACE,cAACE,EAAD,CAAYrB,SA7BC,SAAC,GAAW,IAATK,EAAQ,EAARA,EAClBQ,EAASR,GACTS,EAAQ1B,KAAK,CACXnC,SAAUT,EAASS,SACnBkE,OAAO,KAAD,OAAOd,QA0Bb,cAAC/D,EAAA,EAAD,CAAWC,KAAMA","file":"static/js/6.6b0e016c.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: \"https://api.themoviedb.org/3\",\n  params: {\n    api_key: \"67e32eac52b358cb1bf13e724f501ef6\",\n  },\n});\n\nexport const searchMovies = (query) => {\n  return instance.get(\"/search/movie\", {\n    params: {\n      query,\n    },\n  });\n};\n\nexport const getTrendingMovies = async () => {\n  const { data } = await instance.get(\"/trending/movie/day\");\n  return data.results;\n};\n\nexport const getMovieInfo = (id) => {\n  return instance.get(`/movie/${id}`, {\n    params: {\n      language: \"ru-RU\",\n    },\n  });\n};\n\nexport const getMovieCredits = (id) => {\n  return instance.get(`/movie/${id}/credits`, {\n    params: {\n      language: \"ru-RU\",\n    },\n  });\n};\n\nexport const getMovieReviews = (id, page = 1) => {\n  return instance.get(`/movie/${id}/reviews`, {\n    params: {\n      language: \"en-EN\",\n      page,\n    },\n  });\n};\n","import { Link, useLocation } from \"react-router-dom\";\n\nimport styles from \"./MovieList.module.css\";\n\nconst MovieList = ({ list }) => {\n  const location = useLocation();\n  const movieElements = list.map((item) => (\n    <li className={styles.List} key={item.id}>\n      <Link\n        to={{\n          pathname: `/movies/${item.id}`,\n          state: {\n            from: location,\n          },\n        }}\n        className={styles.Link}\n      >\n        {item.original_title ? item.original_title : item.original_name}\n      </Link>\n    </li>\n  ));\n  return <ul>{movieElements}</ul>;\n};\n\nexport default MovieList;\n\nMovieList.defaultProps = {\n  list: [],\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"MovieList_List__1j3Wk\",\"Link\":\"MovieList_Link__1m-3V\"};","import { useState, useEffect } from \"react\";\n\nexport const useFetch = (initialState, queryFunc) => {\n  const [state, setState] = useState(initialState);\n\n  useEffect(() => {\n    const fetchFunc = async () => {\n      try {\n        const result = await queryFunc();\n        setState(result);\n      } catch (error) {}\n    };\n    fetchFunc();\n  }, [queryFunc]);\n\n  return [state];\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useState } from \"react\";\n\nexport const useForm = (initialState, onSubmit) => {\n  const [state, setState] = useState(initialState);\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n    setState((prevState) => {\n      return { ...prevState, [name]: value };\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSubmit(state);\n    setState({ ...initialState });\n  };\n\n  return [state, handleChange, handleSubmit];\n};\n","export const initialState = {\n  q: \"\",\n};\n","import { useForm } from \"../../shared/hooks\";\n\nimport { initialState } from \"./initianState\";\n\nconst Form = ({ onSubmit }) => {\n  const [data, handleChange, handleSubmit] = useForm(initialState, onSubmit);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input name=\"q\" value={data.q} onChange={handleChange} type=\"text\" />\n    </form>\n  );\n};\n\nexport default Form;\n","import { useHistory, useLocation } from \"react-router-dom\";\nimport SearchForm from \"../../client/SearchForm\";\nimport MovieList from \"../../client/MovieList\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react/cjs/react.development\";\nimport { searchMovies } from \"../../shared/services/movies\";\n\nconst MoviesPage = () => {\n  const [list, setList] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const history = useHistory();\n  const location = useLocation();\n\n  const onSubmit = ({ q }) => {\n    setQuery(q);\n    history.push({\n      pathname: location.pathname,\n      search: `q=${q}`,\n    });\n  };\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      try {\n        const searchParams = new URLSearchParams(location.search);\n        const searchText = searchParams.get(\"q\");\n        const { data } = await searchMovies(searchText);\n        setList(data.results);\n      } catch (error) {}\n    };\n    if (location.search) {\n      fetchMovies();\n    }\n\n    //   if(location.search){\n    //     setState(prevState => ({...prevState, loading: true}));\n    //     fetchPosts()\n    // }\n  }, [location.search]);\n\n  return (\n    <>\n      <SearchForm onSubmit={onSubmit} />\n      <MovieList list={list} />\n    </>\n  );\n};\n\nexport default MoviesPage;\n"],"sourceRoot":""}